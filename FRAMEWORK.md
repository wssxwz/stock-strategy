# 投资决策助手 - 完整框架设计

## 一、系统定位

**核心价值：** 信息 → 分析 → 建议，用户只做最终决策
**服务对象：** 个人投资者，聚焦美股 S&P500，1小时级别策略
**时区：** 北京时间 (GMT+8)

---

## 二、三层信息架构

### Layer 1：原始数据（机器采集）
- 全球市场行情（美股/欧股/亚股/大宗商品/外汇）
- 财经日历（重要经济数据/央行决议/财报日历）
- 技术信号（RSI/MACD/BB/MA扫描）
- 新闻舆情（核心关键词过滤）

### Layer 2：智能分析（AI处理）
- 市场情绪评分（0-100）
- 板块轮动分析
- 个股信号评分
- 持仓健康检查

### Layer 3：决策建议（推送呈现）
- 7:50 手机摘要（Telegram，<200字）
- 8:10 电脑报告（Dashboard，完整HTML）
- 盘中信号（实时Telegram推送）
- 收盘复盘（每日归档）

---

## 三、自动化任务清单

### 📱 Task 1: 早盘摘要 [7:50 北京时间 = UTC 23:50]
**触发：** Cron `50 23 * * 1-5`
**内容：**
- 昨夜美股三大指数涨跌
- 亚欧市场开盘情况
- 大宗商品（原油/黄金）变化
- 今日重要事件预告（财报/经济数据）
- 信号池：今日重点关注股票
**格式：** Telegram消息，emoji + 数字，一屏看完

### 📊 Task 2: 深度早报 [8:10 北京时间 = UTC 0:10]
**触发：** Cron `10 0 * * 2-6`
**内容：**
- 完整市场分析报告（HTML Dashboard）
- 板块热力图（哪个板块最强/最弱）
- 持仓检查（现有持仓的最新技术状态）
- 今日操作建议（具体到：买/持/减/卖 + 理由）
- 风险提示（高风险事件清单）
**格式：** Dashboard页面更新 + Telegram附带链接

### 📡 Task 3: 盘中实时信号 [美股交易时段 UTC 14-20]
**触发：** Cron `0 14,15,16,17,18,19 * * 1-6`（现有）
**内容：**
- 买入信号（现有逻辑，两阶段扫描）
- 卖出/止盈止损（持仓监控）
- 异常波动预警（某股暴涨暴跌>3%）
**格式：** 即时Telegram推送

### 🌙 Task 4: 收盘复盘 [美股收盘后 UTC 21:00]
**触发：** Cron `0 21 * * 2-6`
**内容：**
- 今日操作回顾（哪些信号触发了，结果如何）
- 持仓盈亏日报
- 明日预警（明日财报/重要数据）
- Dashboard 每日数据存档
**格式：** Telegram摘要 + Dashboard更新

---

## 四、数据来源规划

| 数据类型 | 来源 | 延迟 | 费用 |
|---------|------|------|------|
| 股价/技术指标 | yfinance | 15-20min | 免费 |
| 财报日历 | yfinance earnings | 1天 | 免费 |
| 经济日历 | investing.com 爬虫 | 实时 | 免费 |
| 指数行情 | yfinance (SPY/QQQ/DIA) | 15min | 免费 |
| 大宗商品 | yfinance (GC=F/CL=F) | 15min | 免费 |
| 外汇 | yfinance (USDJPY=X) | 实时 | 免费 |
| 市场新闻 | Yahoo Finance RSS | 实时 | 免费 |
| 恐惧贪婪指数 | CNN API | 实时 | 免费 |
| 财报预期/实际 | yfinance | 1天 | 免费 |

---

## 五、Dashboard 页面架构

### 页面1: 今日概览 (index.html) ← 现有，需升级
- 顶部：市场情绪仪表盘（恐惧/贪婪指数）
- 板块热力图
- 今日信号列表
- 持仓状态

### 页面2: 信号追踪 (signals.html) ← 现有dashboard
- 买入/卖出信号历史
- 持仓管理
- 交易记录

### 页面3: 每日报告 (report.html) ← 新建
- 深度早报HTML版
- 可按日期切换历史报告
- 图表：板块表现/个股分析

### 页面4: 持仓分析 (portfolio.html) ← 新建
- 持仓列表 + 实时盈亏
- 风险敞口分析
- 收益曲线

---

## 六、技术实现路径

### 阶段1（本次实现）：自动化数据采集 + 推送
- morning_brief.py：早盘摘要生成
- market_analyzer.py：深度市场分析
- evening_review.py：收盘复盘
- dashboard升级：多页面，数据由JSON驱动

### 阶段2（后续迭代）：
- AI摘要（接入Claude API生成分析文字）
- 更多数据源（Alpha Vantage/FRED经济数据）
- 持仓同步（券商API）

---

## 七、文件结构规划

```
stock-strategy/
├── data/
│   ├── daily/          # 每日JSON数据存档
│   │   └── 2026-02-22.json
│   ├── portfolio.json  # 持仓记录
│   └── signals.json    # 信号历史
├── jobs/               # 自动化任务
│   ├── morning_brief.py    # 7:50 早盘摘要
│   ├── deep_analysis.py    # 8:10 深度早报
│   ├── evening_review.py   # 收盘复盘
│   └── market_data.py      # 数据采集基础模块
├── monitor/            # 现有盘中扫描（保留）
├── dashboard/          # 前端页面
│   ├── index.html      # 今日概览（升级）
│   ├── signals.html    # 信号追踪（现有迁移）
│   ├── report.html     # 每日报告
│   └── portfolio.html  # 持仓分析
└── src/                # 现有策略分析（保留）
```
